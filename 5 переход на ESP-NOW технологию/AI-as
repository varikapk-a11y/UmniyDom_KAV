ТЕХНИЧЕСКОЕ ЗАДАНИЕ для AI-ассистента №2
Проект: Полная система ESP-NOW: Хаб (ESP32) + Узел (ESP32-C3). Цель: Создать два готовых к сборке проекта в PlatformIO, которые работают вместе "из коробки".

1. Критика предыдущего результата
Предыдущее выполнение задания неполно. Был подготовлен только проект для хаба (ESP32). Для работы системы обязательно нужен проект узла (ESP32-C3). Задание считается выполненным только при наличии двух рабочих проектов.

2. Исходные данные (то, что уже есть и работает)
2.1. Код хаба (ESP32): Используйте этот уже адаптированный и проверенный код. Он написан для Arduino Framework, использует новое API ESP-NOW и асинхронный веб-сервер.
*(Здесь вставьте полный код Test_ESP32_Hub_WiFi_ESP-NOW.ino, который мы исправляли под Arduino Core 3.4.0+ и ArduinoJson 6.x)*

2.2. Код узла (ESP32-C3): Используйте этот уже адаптированный и проверенный код.
(Здесь вставьте полный код Test_ESP32-C3_uzel_#5.ino, который мы исправляли)

3. Задача (что сделать)
Создать два отдельных проекта в PlatformIO с первой и единственной сборкой, которая проходит без ошибок.

Проект 1: ESP32_Hub_Final (Хаб)

Плата: Espressif ESP32 Dev Module.

Задача: Упаковать предоставленный код хаба в структуру PlatformIO.

Ключевое требование к platformio.ini: Библиотеки должны быть зафиксированы явно и поимённо для предотвращения конфликтов:

ini
lib_deps =
    me-no-dev/ESPAsyncWebServer @ 3.0.6
    ESP32 Async TCP @ 1.2.2
    bblanchon/ArduinoJson @ 6.21.3
Проект 2: ESP32C3_Node_Final (Узел)

Плата: Espressif ESP32-C3-DevModule (или аналог).

Задача: Упаковать предоставленный код узла в структуру PlatformIO.

Ключевое требование к platformio.ini: Узлу не нужны внешние библиотеки, только ядро ESP32. Конфигурация должна быть минимальной:

ini
lib_deps =
    https://github.com/espressif/arduino-esp32.git
Общие технические требования для обоих проектов:

Структура: Стандартная структура PlatformIO (src/ для кода).

Исходники: Код должен быть размещён в файле src/main.cpp.

Сборка: Команда pio run в корне каждого проекта должна выполняться без единой ошибки компиляции или линковки.

Чистота: В проектах не должно быть лишних файлов в src/, папка lib/ — пустая. Все зависимости управляются через lib_deps.

4. Выходные данные (что предоставить)
AI должен предоставить чёткую пошаговую инструкцию для пользователя, включающую:

Точные команды для создания двух проектов в PlatformIO.

Полное, готовое к копированию содержимое двух файлов platformio.ini (для хаба и для узла).

Полное, готовое к копированию содержимое двух файлов src/main.cpp (для хаба и для узла).

Команду для проверки: pio run --target clean && pio run.

5. Критерии приёмки (как проверить успех)
Задание считается выполненным, если:

Пользователь, следуя инструкции, создаёт два проекта.

Первая же сборка (pio run) в каждом проекте завершается успешно (в терминале видно SUCCESS).

В логе сборки хаба видны строки установки: ESPAsyncWebServer @ 3.0.6, ESP32 Async TCP @ 1.2.2, ArduinoJson @ 6.21.3.

В логе сборки узла нет ошибок и предупреждений о missing dependencies.

Задание считается НЕ выполненным, если:

Предоставлен проект только для одного устройства.

При сборке возникают ошибки #error For RASPBERRY_PI_PICO_W board... или fatal error: WiFiServer.h....

Пользователю приходится вручную править код или конфигурацию после выполнения инструкции.
